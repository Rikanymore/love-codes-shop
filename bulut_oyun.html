<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A≈ük Bulutu Pro | Zƒ±pla & Kazan</title>
    <style>
        body { margin: 0; overflow: hidden; background: #0b0f19; font-family: 'Poppins', sans-serif; touch-action: none; }
        canvas { display: block; margin: 0 auto; background: linear-gradient(to bottom, #1e293b, #0f172a); cursor: none; }
        
        /* UI Tasarƒ±mƒ± */
        .game-ui { position: absolute; top: 20px; width: 100%; pointer-events: none; display: flex; justify-content: space-around; }
        .stat-box { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); padding: 5px 20px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.2); text-align: center; }
        .label { font-size: 0.7rem; color: #94a3b8; text-transform: uppercase; }
        .value { font-size: 1.5rem; color: #2dd4bf; font-weight: bold; }

        /* Yandƒ±n/GameOver Ekranƒ± */
        #game-over-screen {
            position: fixed; inset: 0; background: rgba(15, 23, 42, 0.95);
            display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 1000;
        }
        .go-title { font-size: 3rem; color: #f43f5e; font-weight: 900; margin-bottom: 10px; }
        .go-score { font-size: 1.5rem; color: #fff; margin-bottom: 30px; }
        .btn {
            background: #2dd4bf; color: #0f172a; border: none; padding: 15px 40px;
            font-size: 1.2rem; font-weight: bold; border-radius: 50px; cursor: pointer;
            transition: 0.3s; text-decoration: none;
        }
        .btn:hover { transform: scale(1.1); box-shadow: 0 0 20px #2dd4bf; }

        .back-btn { position: absolute; top: 20px; left: 20px; color: #fff; text-decoration: none; font-size: 0.8rem; opacity: 0.5; }
    </style>
</head>
<body>

    <a href="index.html" class="back-btn">‚Üê Maƒüazaya D√∂n</a>

    <div class="game-ui">
        <div class="stat-box">
            <div class="label">Skor</div>
            <div class="value" id="current-score">0</div>
        </div>
        <div class="stat-box">
            <div class="label">En Y√ºksek</div>
            <div class="value" id="high-score">0</div>
        </div>
    </div>

    <div id="game-over-screen">
        <div class="go-title">EYVAH! üíî</div>
        <div class="go-score" id="final-stats">Skor: 0</div>
        <button class="btn" onclick="location.reload()">TEKRAR DENE</button>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = Math.min(window.innerWidth, 450);
        canvas.height = window.innerHeight;

        // OYUN AYARLARI
        let score = 0;
        let highScore = localStorage.getItem('loveJumpHighScore') || 0;
        document.getElementById('high-score').innerText = highScore;
        
        let gameActive = true;
        let particles = [];

        const player = {
            x: canvas.width / 2,
            y: canvas.height - 150,
            w: 35, h: 35,
            vy: 0,
            jumpPower: -13,
            gravity: 0.45,
            stretch: 1 // Animasyon i√ßin esneme fakt√∂r√º
        };

        let platforms = [];
        const platformCount = 8;

        function createPlatforms() {
            for (let i = 0; i < platformCount; i++) {
                platforms.push({
                    x: Math.random() * (canvas.width - 70),
                    y: (canvas.height / platformCount) * i,
                    w: 75, h: 15,
                    type: Math.random() > 0.9 ? 'super' : 'normal' // %10 ≈üansla s√ºper zƒ±platan platform
                });
            }
        }

        function drawHeart(x, y, scaleX, scaleY) {
            ctx.save();
            ctx.translate(x, y);
            ctx.scale(scaleX, scaleY);
            ctx.fillStyle = "#f43f5e";
            ctx.beginPath();
            ctx.moveTo(0, 0);
            ctx.bezierCurveTo(-15, -15, -30, 0, 0, 20);
            ctx.bezierCurveTo(30, 0, 15, -15, 0, 0);
            ctx.fill();
            // Parlama efekti
            ctx.fillStyle = "rgba(255,255,255,0.3)";
            ctx.beginPath();
            ctx.arc(-5, -5, 3, 0, Math.PI*2);
            ctx.fill();
            ctx.restore();
        }

        function update() {
            if (!gameActive) return;

            player.vy += player.gravity;
            player.y += player.vy;

            // Animasyon: Hƒ±zƒ±na g√∂re esneme yap
            player.stretch = 1 + (Math.abs(player.vy) * 0.02);

            // Platform √áarpƒ±≈üma (Sadece a≈üaƒüƒ± d√º≈üerken)
            if (player.vy > 0) {
                platforms.forEach(p => {
                    if (player.x + 15 > p.x && player.x - 15 < p.x + p.w &&
                        player.y + 15 > p.y && player.y + 15 < p.y + p.h + 10) {
                        
                        player.vy = p.type === 'super' ? player.jumpPower * 1.8 : player.jumpPower;
                        
                        // K√º√ß√ºk bir basma animasyonu i√ßin platformu sars
                        p.y += 5; 
                        
                        // Skor artƒ±≈üƒ± (sadece yukarƒ± √ßƒ±ktƒ±k√ßa)
                        score += 10;
                        document.getElementById('current-score').innerText = score;
                    }
                });
            }

            // Ekran Kaydƒ±rma
            if (player.y < canvas.height / 3) {
                let diff = canvas.height / 3 - player.y;
                player.y = canvas.height / 3;
                platforms.forEach(p => {
                    p.y += diff;
                    if (p.y > canvas.height) {
                        p.y = 0;
                        p.x = Math.random() * (canvas.width - 70);
                        p.type = Math.random() > 0.9 ? 'super' : 'normal';
                    }
                });
            }

            // Kontroller & Sƒ±nƒ±rlar
            if (player.x > canvas.width) player.x = 0;
            if (player.x < 0) player.x = canvas.width;

            // Oyun Bitti mi?
            if (player.y > canvas.height) {
                gameOver();
            }
        }

        function gameOver() {
            gameActive = false;
            if (score > highScore) {
                localStorage.setItem('loveJumpHighScore', score);
            }
            document.getElementById('final-stats').innerText = `Skorun: ${score} | Rekorun: ${Math.max(score, highScore)}`;
            document.getElementById('game-over-screen').style.display = 'flex';
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Arka Plan Yƒ±ldƒ±zlar
            ctx.fillStyle = "#334155";
            for(let i=0; i<30; i++) {
                ctx.beginPath();
                ctx.arc((i*137)%canvas.width, (i*score*0.1)%canvas.height, 1, 0, Math.PI*2);
                ctx.fill();
            }

            // Platformlarƒ± √áiz
            platforms.forEach(p => {
                const gradient = ctx.createLinearGradient(p.x, p.y, p.x, p.y + p.h);
                if(p.type === 'super') {
                    gradient.addColorStop(0, '#fde047');
                    gradient.addColorStop(1, '#ca8a04');
                    ctx.shadowBlur = 15; ctx.shadowColor = "#fde047";
                } else {
                    gradient.addColorStop(0, '#ffffff');
                    gradient.addColorStop(1, '#cbd5e1');
                    ctx.shadowBlur = 5; ctx.shadowColor = "#fff";
                }
                ctx.fillStyle = gradient;
                ctx.beginPath();
                ctx.roundRect(p.x, p.y, p.w, p.h, 8);
                ctx.fill();
                ctx.shadowBlur = 0;
            });

            // Karakteri √áiz
            drawHeart(player.x, player.y, 1 / player.stretch, player.stretch);

            update();
            requestAnimationFrame(draw);
        }

        // Mouse ve Touch Kontrol
        const move = (e) => {
            const clientX = e.touches ? e.touches[0].clientX : e.clientX;
            const rect = canvas.getBoundingClientRect();
            player.x = clientX - rect.left;
        };
        window.addEventListener('mousemove', move);
        window.addEventListener('touchmove', move);

        createPlatforms();
        draw();
    </script>
</body>
</html>